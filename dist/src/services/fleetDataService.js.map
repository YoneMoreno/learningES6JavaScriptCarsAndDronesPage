{"version":3,"sources":["../../../src/services/fleetDataService.js"],"names":["FleetDataService","cars","drones","errors","fleet","data","type","validateCarData","car","loadCar","push","e","drone","loadDrone","c","license","model","latLong","make","miles","requiredProps","split","hasErrors","field","d","airTimeHours","base"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;;;IAEaA,gB,WAAAA,gB;AAET,gCAAc;AAAA;;AACV,aAAKC,IAAL,GAAY,EAAZ;AACA,aAAKC,MAAL,GAAc,EAAd;AACA,aAAKC,MAAL,GAAc,EAAd;AACH;;;;iCAEQC,K,EAAO;AAAA;AAAA;AAAA;;AAAA;AACZ,qCAAiBA,KAAjB,8HAAwB;AAAA,wBAAfC,IAAe;;AACpB,4BAAQA,KAAKC,IAAb;AACI,6BAAK,KAAL;AACI,gCAAG,KAAKC,eAAL,CAAqBF,IAArB,CAAH,EAA+B;AAC3B,oCAAIG,MAAM,KAAKC,OAAL,CAAaJ,IAAb,CAAV;AACA,qCAAKJ,IAAL,CAAUS,IAAV,CAAeF,GAAf;AACH,6BAHD,MAGK;AACD,oCAAIG,KAAI,yBAAc,uBAAd,EAAsCN,IAAtC,CAAR;AACA,qCAAKF,MAAL,CAAYO,IAAZ,CAAiBC,EAAjB;AACH;AACD;AACJ,6BAAK,OAAL;AACI,gCAAIC,QAAQ,KAAKC,SAAL,CAAeR,IAAf,CAAZ;AACA,iCAAKH,MAAL,CAAYQ,IAAZ,CAAiBE,KAAjB;AACA;AACJ;AACI,gCAAID,IAAI,yBAAc,sBAAd,EAAsCN,IAAtC,CAAR;AACA,iCAAKF,MAAL,CAAYO,IAAZ,CAAiBC,CAAjB;AACA;AAjBR;AAmBH;AArBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBf;;;gCAEOH,G,EAAK;AACT,gBAAI;AACA,oBAAIM,IAAI,aAAQN,IAAIO,OAAZ,EAAqBP,IAAIQ,KAAzB,EAAgCR,IAAIS,OAApC,CAAR;AACAH,kBAAEI,IAAF,GAASV,IAAIU,IAAb;AACAJ,kBAAEK,KAAF,GAAUX,IAAIW,KAAd;AACA,uBAAOL,CAAP;AACH,aALD,CAKE,OAAOH,CAAP,EAAU;AACR,qBAAKR,MAAL,CAAYO,IAAZ,CAAiB,yBAAc,mBAAd,EAAmCC,CAAnC,CAAjB;AACH;AACD,mBAAO,IAAP;AACH;;;wCAEeH,G,EAAI;AAChB,gBAAIY,gBAAgB,mCAAmCC,KAAnC,CAAyC,GAAzC,CAApB;AACA,gBAAIC,YAAY,KAAhB;;AAFgB;AAAA;AAAA;;AAAA;AAIhB,sCAAiBF,aAAjB,mIAA+B;AAAA,wBAAvBG,KAAuB;;AAC3B,wBAAG,CAACf,IAAIe,KAAJ,CAAJ,EAAe;AACX,6BAAKpB,MAAL,CAAYO,IAAZ,CAAiB,oDAAuCa,KAAvC,CAAjB,EAAkEf,GAAlE;AACAc,oCAAY,IAAZ;AACH;AACJ;AATe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWnB;;;kCAESV,K,EAAO;AACb,gBAAI;AACA,oBAAIY,IAAI,iBAAUZ,MAAMG,OAAhB,EAAyBH,MAAMI,KAA/B,EAAsCJ,MAAMK,OAA5C,CAAR;AACAO,kBAAEC,YAAF,GAAiBb,MAAMa,YAAvB;AACAD,kBAAEE,IAAF,GAASd,MAAMc,IAAf;AACA,uBAAOF,CAAP;AACH,aALD,CAKE,OAAOb,CAAP,EAAU;AACR,qBAAKR,MAAL,CAAYO,IAAZ,CAAiB,yBAAc,sBAAd,EAAsCC,CAAtC,CAAjB;AACH;AACD,mBAAO,IAAP;AACH","file":"fleetDataService.js","sourcesContent":["import {Car} from \"../classes/Car.js\";\r\nimport {Drone} from \"../classes/Drone.js\";\r\nimport {DataError} from \"./DataError.js\";\r\n\r\nexport class FleetDataService {\r\n\r\n    constructor() {\r\n        this.cars = [];\r\n        this.drones = [];\r\n        this.errors = [];\r\n    }\r\n\r\n    loadData(fleet) {\r\n        for (let data of fleet) {\r\n            switch (data.type) {\r\n                case 'car':\r\n                    if(this.validateCarData(data)) {\r\n                        let car = this.loadCar(data);\r\n                        this.cars.push(car);\r\n                    }else{\r\n                        let e = new DataError('Car data is not valid',data);\r\n                        this.errors.push(e);\r\n                    }\r\n                    break;\r\n                case 'drone':\r\n                    let drone = this.loadDrone(data);\r\n                    this.drones.push(drone);\r\n                    break;\r\n                default:\r\n                    let e = new DataError('invalid vehicle type', data);\r\n                    this.errors.push(e);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    loadCar(car) {\r\n        try {\r\n            let c = new Car(car.license, car.model, car.latLong);\r\n            c.make = car.make;\r\n            c.miles = car.miles;\r\n            return c;\r\n        } catch (e) {\r\n            this.errors.push(new DataError('error loading car', e));\r\n        }\r\n        return null;\r\n    }\r\n\r\n    validateCarData(car){\r\n        let requiredProps = 'license make model miles latLong'.split(' ');\r\n        let hasErrors = false;\r\n        \r\n        for(let field of requiredProps){\r\n            if(!car[field]){\r\n                this.errors.push(new DataError(`invalid field of car: ${field}`), car);\r\n                hasErrors = true;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    loadDrone(drone) {\r\n        try {\r\n            let d = new Drone(drone.license, drone.model, drone.latLong);\r\n            d.airTimeHours = drone.airTimeHours;\r\n            d.base = drone.base;\r\n            return d;\r\n        } catch (e) {\r\n            this.errors.push(new DataError('error loading drones', e));\r\n        }\r\n        return null;\r\n    }\r\n}"]}